<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üõ°Ô∏è Tines Shift Dashboard</title>

<style>
:root{
  --glass-bg: rgba(255,255,255,0.16);
  --glass-border: rgba(255,255,255,0.25);
  --card-bg: rgba(255,255,255,0.18);
  --hover-bg: rgba(255,255,255,0.28);
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  font-family:"Segoe UI",system-ui,sans-serif;
  background:radial-gradient(circle at top,#2c5364,#0f2027 70%);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
}

/* =========================
   TI TOOL FIXED BUTTON
   ========================= */
.ti-tool{
  position:fixed;
  top:20px;
  right:24px;
  z-index:9999;
  padding:10px 16px;
  border-radius:16px;
  background:rgba(255,255,255,0.25);
  border:1px solid rgba(255,255,255,0.4);
  color:#fff;
  font-size:13px;
  font-weight:600;
  text-decoration:none;
  backdrop-filter:blur(12px);
  box-shadow:0 8px 20px rgba(0,0,0,0.35);
  transition:.25s ease;
}
.ti-tool:hover{
  background:rgba(255,255,255,0.4);
  transform:translateY(-1px);
}

/* ========================= */

.dashboard{
  width:560px;
  padding:28px;
  border-radius:24px;
  background:var(--glass-bg);
  backdrop-filter:blur(16px);
  border:1px solid var(--glass-border);
  box-shadow:0 30px 60px rgba(0,0,0,.45);
}

h2{
  text-align:center;
  margin:0 0 20px;
  font-weight:600;
}

.controls{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
  margin-bottom:24px;
}

label{
  font-size:13px;
  opacity:.85;
  margin-bottom:6px;
  display:block;
}

input,select{
  width:100%;
  padding:10px 12px;
  border-radius:12px;
  border:none;
  font-size:14px;
}

.date-wrapper{position:relative;cursor:pointer}
.date-display{background:#fff;color:#000}
.calendar-input{position:absolute;inset:0;opacity:0;cursor:pointer}

.divider{
  height:1px;
  background:rgba(255,255,255,.3);
  margin:24px 0;
}

h3{
  margin:0 0 14px;
  text-align:center;
  font-weight:500;
}

.cards{
  display:grid;
  gap:12px;
}

.card{
  background:var(--card-bg);
  border-radius:16px;
  padding:14px 16px;
  transition:.2s ease;
}

.card:hover{background:var(--hover-bg)}

.card a{
  color:#fff;
  text-decoration:none;
  display:flex;
  align-items:center;
  font-size:15px;
}

.card a.disabled{
  opacity:.4;
  pointer-events:none;
}

.footer{
  margin-top:18px;
  text-align:center;
  font-size:12px;
  opacity:.75;
}
</style>
</head>

<body>

<!-- FIXED TOP-RIGHT BUTTON -->
<a class="ti-tool" href="https://osintdb.vercel.app" target="_blank">
  üïµÔ∏è TI Tool
</a>

<div class="dashboard">
  <h2>üõ°Ô∏è Tines Shift Dashboard</h2>

  <!-- INPUTS -->
  <div class="controls">
    <div>
      <label>üìÖ Date</label>
      <div class="date-wrapper" onclick="openCalendar()">
        <input id="dateDisplay" class="date-display" placeholder="DD-MM-YYYY" readonly>
        <input type="date" id="date" class="calendar-input" onchange="handleDate()">
      </div>
    </div>

    <div>
      <label>‚è∞ Shift</label>
      <select id="shift" onchange="generateLinks()">
        <option value="">Select shift</option>
        <option value="morning">üåÖ Morning</option>
        <option value="afternoon">üåá Afternoon</option>
        <option value="night">üåô Night</option>
      </select>
    </div>
  </div>

  <div class="divider"></div>

  <!-- REPORTING -->
  <h3>üìä Shift Reporting</h3>

  <div class="cards">

    <div class="card">
      <a id="triggered" class="disabled" target="_blank">
        1Ô∏è‚É£ Total cases triggered
      </a>
    </div>

    <div class="card">
      <a id="open" class="disabled" target="_blank">
        üö® Total open cases
      </a>
    </div>

    <div class="card">
      <a id="closed" class="disabled" target="_blank">
        ‚úÖ Closed / Handled cases
      </a>
    </div>

    <div class="card">
      <a id="onhold" class="disabled" target="_blank">
        ‚è∏ On Hold cases
      </a>
    </div>

  </div>

  <div class="footer">
    ‚öîÔ∏è GCC SOC India
  </div>
</div>

<script>
function openCalendar(){
  const d=document.getElementById("date");
  d.showPicker?d.showPicker():d.focus();
}

function handleDate(){
  const v=date.value.split("-");
  dateDisplay.value=`${v[2]}-${v[1]}-${v[0]}`;
  generateLinks();
}

function getUTC(date,shift){
  let s,e;
  const d=new Date(date);
  if(shift==="morning"){
    s=`${date}T00:30:00.000Z`;
    e=`${date}T08:30:00.000Z`;
  }
  if(shift==="afternoon"){
    s=`${date}T08:30:00.000Z`;
    e=`${date}T16:30:00.000Z`;
  }
  if(shift==="night"){
    s=`${date}T16:30:00.000Z`;
    d.setDate(d.getDate()+1);
    e=`${d.toISOString().split("T")[0]}T00:30:00.000Z`;
  }
  return {s,e};
}

function enable(id,url){
  const a=document.getElementById(id);
  a.href=url;
  a.classList.remove("disabled");
}

function generateLinks(){
  if(!date.value||!shift.value) return;

  const {s,e}=getUTC(date.value,shift.value);
  const base="https://intezer-managed-soar.tines.com/teams/65868/cases";
  const common={
    "filter[child_team_ids]":"[72143,72144]",
    view:"list",
    v:2
  };

  enable("triggered",
    `${base}?${new URLSearchParams({...common,sort:"RECENTLY_EDITED","filter[date][start]":s,"filter[date][end]":e})}`
  );

  enable("open",
    `${base}?${new URLSearchParams({...common,"filter[subStatus]":"escalated,in_progress","filter[date][start]":s,"filter[date][end]":e})}`
  );

  enable("closed",
    `${base}?${new URLSearchParams({...common,"filter[subStatus]":"done,canceled,true_positive,benign_positive_suspicious_expected,false_positive,false_negative_missed_detection,duplicate","filter[resolved][start]":s,"filter[resolved][end]":e})}`
  );

  enable("onhold",
    `${base}?${new URLSearchParams({...common,"filter[subStatus]":"on_hold","filter[date][start]":s,"filter[date][end]":e})}`
  );
}
</script>

</body>
</html>
